// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "cockroachdb"
  url      = env("DATABASE_URL")
}

model User {
	id        			BigInt		@id @default(sequence())
	email						String		@unique
	firstName				String
	lastName				String
	hashedPassword	String
	createdAt				DateTime	@default(now())
	updatedAt 			DateTime	@updatedAt
	movements				Movement[]
	crdb_region			crdb_internal_region?
}

model Movement {
	id						BigInt	@id @default(sequence())
	authorId			BigInt
	author				User		@relation(fields: [authorId], references: [id])
	name					String
	split					String?
	description		String?
	warmupSets		String?
	workingSets		String?
	rpe						String?
	restTime			Int? // in seconds
	movementLogs	MovementLog[]
	crdb_region		crdb_internal_region?
}

model MovementLog {
	id						BigInt		@id @default(sequence())
	movementId		BigInt
	movement			Movement	@relation(fields: [movementId], references: [id])
	sets					Int
	reps					Int
	load					Decimal
	timestamp		DateTime	@default(now())
	crdb_region		crdb_internal_region?
}

enum crdb_internal_region {
  gcp_us_east1			@map("gcp-us-east1")
  gcp_europe_west1	@map("gcp-europe-west1")
  gcp_us_west2			@map("gcp-us-west2")
}
